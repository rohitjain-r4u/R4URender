<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RecruitEForU ATS</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

  <!-- Child pages load their extra CSS first (so our header can override them) -->
  {% block head %}{% endblock %}

  <style>
    :root{
      --header-bg:#2f3b45; --header-border:#212a31;
      --ink:#e9eef2; --icon-teal:#11d4c7; --brand-orange:#d97706;
      --pill-hover:rgba(255,255,255,.06); --focus:#8bffd9; --card-radius:12px;
    }
    html,body{
      height:100%;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:#f6f7f9; color:#212529;
    }

    /* ========= LOCKED HEADER (scoped + high specificity) ========= */
    #rfuHeader.navbar{                              /* the bar itself */
      background:var(--header-bg);
      border-bottom:2px solid var(--header-border);
      box-shadow:0 6px 22px rgba(0,0,0,.18);
      opacity:1 !important; filter:none !important;
    }
    #rfuHeader .navbar-brand.brand{
      color:var(--brand-orange) !important;
      font-weight:800; letter-spacing:.2px; font-size:1.35rem;
    }
    /* links */
    #rfuHeader .navlink,
    #rfuHeader .navlink:link,
    #rfuHeader .navlink:visited{
      color:var(--ink) !important;
      display:inline-flex; align-items:center; gap:.5rem;
      padding:.5rem .8rem; border-radius:999px; text-decoration:none;
      line-height:1; transition:background .2s,color .2s,transform .08s;
      opacity:1 !important; filter:none !important;
    }
    #rfuHeader .navlink span{
      color:var(--ink) !important; opacity:1 !important;
    }
    /* icons */
    #rfuHeader .navlink .bi{
      color:var(--icon-teal) !important; font-size:1rem; position:relative; top:1px;
      opacity:1 !important; filter:none !important;
    }
    #rfuHeader .navlink:hover,
    #rfuHeader .navlink:focus{
      background:var(--pill-hover); color:#fff !important; outline:none;
    }
    #rfuHeader .navlink:active{ transform:translateY(1px); }

    /* toggler */
    #rfuHeader .navbar-toggler{ border-color:rgba(255,255,255,.25); }
    #rfuHeader .navbar-toggler .navbar-toggler-icon{ filter:invert(1) grayscale(1); }

    .header-wrap{ min-height:64px; }

    /* Cards & alerts (unchanged) */
    .card{ border:0; border-radius:var(--card-radius); box-shadow:0 8px 28px rgba(20,20,30,.06); }
    .card-header{ background:#fff; border-bottom:1px solid rgba(16,24,40,0.06); }
    .card-body{ padding:1.25rem; }
    .navlink:focus-visible{ box-shadow:0 0 0 3px var(--focus); color:#fff !important; }

    @media (max-width: 991.98px){
      .nav-actions{ padding-top:.5rem; padding-bottom:.75rem; }
      .brand{ font-size:1.2rem; }
    }
  </style>
</head>
<body>

  <!-- Header (note the id="rfuHeader") -->
  <nav id="rfuHeader" class="navbar navbar-expand-lg app-header" role="navigation" aria-label="Primary">
    <div class="container">
      <a class="navbar-brand brand d-flex align-items-center" href="{{ url_for('dashboard') }}">
        <i class="bi bi-briefcase me-2" aria-hidden="true" style="color:var(--icon-teal)"></i>
        RecruitEForU ATS
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
              aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse header-wrap" id="mainNav">
        <ul class="navbar-nav ms-auto nav-actions align-items-lg-center gap-lg-2">
          <li class="nav-item">
            <a class="navlink" href="{{ url_for('requirements') }}">
              <i class="bi bi-list-check" aria-hidden="true"></i><span>Requirements</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="navlink" href="{{ url_for('all_candidates_bp.all_candidates') }}">
              <i class="bi bi-people" aria-hidden="true"></i><span>All Candidates</span>
            </a>
          </li>

          <li class="nav-item">
  <a class="navlink" href="#" style="opacity:0.5; cursor:not-allowed;">
    <i class="bi bi-graph-up" aria-hidden="true"></i><span>Reports (Disabled)</span>
  </a>
</li>
          <li class="nav-item">
            <a class="navlink" href="{{ url_for('recruiter_perf.recruiter_performance_page') }}">
              <i class="bi bi-speedometer2" aria-hidden="true"></i><span>Recruiter Performance</span>
            </a>
          </li>

          {% if session.get('role') == 'admin' %}
          <li class="nav-item">
            <a class="navlink" href="{{ url_for('users') }}">
              <i class="bi bi-person-badge" aria-hidden="true"></i><span>User Management</span>
            </a>
          </li>
          {% endif %}

          <li class="nav-item">
            <a class="navlink" href="{{ url_for('logout') }}">
              <i class="bi bi-box-arrow-right" aria-hidden="true"></i><span>Logout</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="navlink" href="{{ url_for('change_password') }}">
              <i class="bi bi-key" aria-hidden="true"></i><span>Change Password</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main container -->
  <div class="container py-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Accessibility: focus modal body when shown
    document.addEventListener('shown.bs.modal', function (event) {
      var modal = event.target;
      var body = modal.querySelector('.modal-body');
      if (body) body.setAttribute('tabindex', '-1');
    }, true);
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>
